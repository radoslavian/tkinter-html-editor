import os
import bz2
from io import BytesIO

# move it into utils?
def list_files(directory : str, f_ext : str) -> [] or None:
    '''Lists files with a given extension in a directory.

    f_ext-file extension
    eg.: list_files('icons/', '.png')'''

    _, _, filenames = next(os.walk(directory))

    return list(filter(
        lambda f: True if os.path.splitext(f)[-1] == f_ext else False,
        filenames))


def load_icons(directory, file_list):
    "Populates icons data dictionary."

    return {file: {
        'data': bz2.compress(open(directory+file, 'r+b').read()),
        'filename_rel_path': directory+file}
            for file in file_list}


# dictionary composition:
# icons = {
#     'icon.png': {
#         'data': b'data',      # pickled and compressed binary data
#         'description': 'description',
#         'filename_rel_path': 'icons/icon.png'
#     },

icons = {'button.png': {'data': b'BZh91AY&SYEr\r\x18\x00\x01\xbf\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xd0\x03\xfe6\xf7\xabt\xb3\xbb\xb3\xbb\xbc\xde\xf7\xbcu2f\x91\xb5\x18M\xa9\xe9\x0fQ\xe8\x13C\x11\xa3M\r\x03\x11\x84\xde\xa9\xb5\x00d\xf4\x9bP\xf4F\x98M6\x99\'\xa8\xd0`C\xd0\x86LM\x18\x9e\xc4\x90zja\x01\xa3L\x87\xa8\xf5\x1e\xa1\xe9=OQ\x9e\xa6\x91\xe9\xa9\xa3\xd4=Fi\xa9\xe92=\rG\xa9\xb4\x9b\xd42\x80#\x1a\rM\x194zzS\xd0\x9ah\xc9\xb4M\xa4\xd1\xa3#\xd0\x08\xc4\xde\xa0\x83F\x8d0\x13\rC\t\xead\xc8\xc9\xedS\x020\x11\xa6\x1aOC\x13@M\r4\xd3\xda\x89\xb4jd\xcd\x1aF\x83CL\x98\x8d\xa3\xd52\x0fSM\x1ah\xc4 L\x8f jz\x8fI\xb5\x18\xd4\xd3\xd44\xf5\r\xa16\xa65<\x93\xd4i\x91\xa1\xa7\xa8\xf5\x01\x88\xd3\x08\xc9\xfa\x93\xd4\xda\x9e\xa7\x89\xa4\xf5?RyF2\x98\x8f$m#\xd3P\x1e\xa0\xf4\x13O\xd56\x90\xd0\x03Lji\xa1\x90=50\x02\x00\xf4\rF\x9e\x9aOS\xd4\xda\x81\x01\xeai2h\xf2\x86C\x10\xc3H`\x99\xe8\x9ad\x99\x91\xa6\xa1\xa3L\x991\xa2h\xcd\x04zh4\xc94zG\xa4\xc24\x0c&\'\xa9\xa0\xda\x08\xd0\xc8\xc8\xd3C\xd22h\xf4\x8d= \xc6\x81?Q\x0fM4jf\xa6\x02=M\x18\x04\xf52\x06S\xd4\xf4@jz\x13&i\xa2y2\x86&\xf52F\x9amOP\xc8\xd1\xa1\xea\x03\x13G\xa4mF&\x9bQ\x91\xeaa2z\x9bI\xe9=@\xc14\x01\xa0\xd1\x80i\r\xa8z\x04\x1e\xa0\xd1\x89\xea26Q\x88\xf52z\x8fM\x04\xda\x99\x1b(\xc2i\xeacS\xd4N\x0cI\xc9\xc1l\xe5\xca1\xd5\xd30\x80\x04\x9d\xc3\t\xa0@\x01`,\x0c\x00r\r\x86\x15>>N\x14\xf0\xe2\xeb\xc0\x17\x0bY\xb7\x14\xabvA\xd0\x1c4I\x04/2\xb9\x98\xc4"\xb5\xb2\xa2e\xb7\x0f\xdc\xa7H\xb2I\xc8\x94U6)\xc5q\xc4\xa2\x15:\x91\xe6\xb4\x1e,\xb1\xefH1\x19P\x99D\xe5T"\xc6bo\x1a\x9d@\x83M\xad\x1b?6\xb9\x15N\xc9\xf5T\xa6c9\xf0\x0f{\xb9y\x80\xa6/\xd9\xdaP\xe1?\xb7\xb5\x02\x07\xbc\x84|\xa4\xd9J\x86a\xa7Hw\xda\xb9\x14\xe3\x0c\xf9n\x08\xd2\x94^\x7f\x8e\xb2)%\x9c2,\x98\x89\xe4\t\xd02\xbe\xb1[F\x868B\xe79\x84`\x04D}\xf5\x90\x15u\xee\xe7\xc3\x82\xcc\xf5\x15\xc3\xe6\xbcW\xbc\x0f\x95\x0c|\x1a\x101\x10R\x0b\xb4\x91b\xb24\x90vv\x03\xb1\'T\xeb\xe1\xb0\xc5\xd7[\xdd\x14<\x9e\xce\xaf\xb5\x18>\x01\xc2\xe2^\n\xa7\x01:\x81\x9b\x1c_\x85X\xceA\xba\x01]\x90o:7\xb0\xa3TJq\xb7/q\x04\x08~\xe9\x9b<\xc0`\xe6\x96\x0bV\xd3\x84\xff\xaeG\xa4pn\x0c/l\x9e\x1d\xb70\x18N\xf4\xc5J\xd9x\x03\xebT\x96\xed\xee\x08#bF\xcb\x17\xcf\x1a\x8c\xe2\xc7\x1a\xe5R\xf7\xe9\xa1\x19w\xed\xd0\xb9\x8ah\xca\xa5[\x82\x02\x96C\xd4\xb4\xa2o\xb6\xc0+X\x11Al\x903\x02b\xd3f\xa2\x1a\xd7o\xe9\xe1z\xe4\xd2\xc6\xd6g;\x07\xb7\x0e\x1e\x9c\xe9\r\x94\xd3\xfc0\xe4J\xcfA\x04\t\xe7\xaf\xb7\xc3\x02\x0b\xace\xc4J\x98r\xa0\xaa\x80\x9c\xd7\xf3\r\x0b \x8bH\xa2\x98y\xc9\xb1T\x18(x\xed\xcbo!fm|tY{\xb3%>\xe5<\xfaL\x93\x1b\xc4BU\xfc\xd6"8m.\xa14\x9f\x17\xb0\x91rpi\xd5\xb2\x95\xd1\xd9:\x8d2\xd5\x84\xaa\x06\xaa\xaaS\x1c\xc3\x05\x01\x8b`\xcf\xd2\xe4T`k\xa8LI\x19UB\xae\xb63?\xf6\xe3+\xea\xaa\x83vCY2\xb8\xdfQ\x7f1\x969\xcc\xe8+\xabZW:\xa3a`\xcfU\xd1\xb7\x81\xd5\xaf\x87\xdd\x06\x9bD9bvQ\x8b\xc0\xb5\xc9\xf5\xd2\xf5\x08\xbc\xc7y~\x85.9(\xa9\xc1F\xbc\xab"\x13\x1c\xe4\x918\x06\x8az\xff-(\xf3\x84\x96\x85|\xecBv5\x81n\x15\x8b\x19C\xb6\x85\xd7\x18\xcb\xf8:\x10\xad#\x96\xd4~\xcc1\xd5k\x1c\x1b\xf0F\xd6\xc9oEAjD\x96P!\xb1\x9db\xc5\xa4\xe8\x96\xe4\x18R]\x14\xb4\xac\xe2\xf54@\xe7OZ\x1e\xb7T%\xcb\xc1\x1a\xdd\x12\x1aMn9\xf0\xae\x89\xfd4%,6~\xc4\xed\x85\xff\xb8\xd1\xe6#\x12\x08\x82-\x8at\xba\xe7o4n\x92y\xb7=\x88\xde\xcb\xa6\xe8;JK\x80\x13\x9at\x8c\r\xbd\x98\xb4\x17\x90\x94_B2\x81I\xe5b\xb2i\xc8\xe1?\x89t\x93\x10\x8a9A\xcf\xdf\xf6k\xa3\xe1\xb3\xc0\xfd0\x95\x03d\x18X\xd0|\x0f\xc1\x18\xdd\xb4\x0e\xc3ox\x13a\xe2\xf6*\xd7\x99\x9e&h\xfb\xca\xed\xe1;Oy\xd2\xfc\xa4\xa6\xac\xa3\x15#\xc5\xe9\xe5\xcb\x02OT\xf6\x9a\x01\x10#\x95#\x04\x9b\xfaW\x8b\xbd\xe8.\xbf\x03\x17\xfc\xf7\xa8\xfc\xc7A>%\xe7.\x16\x95\x99uu\x8f\xa9\x10/;\xc1\xbd\xd8\x10\xb2*\xbe\xb4?\x85\xa3d\xe4\xf1\xec\xcevH\xdao~U\xecJ3E\xc1RER\xb7\xee\xe0\x96\xfb\x08bm\x9d\xbd2\x13\xd1\xc71\xa2@\x9f\x01\xc9\xdc\x05\xb1\xa6Hq\xb4\xe1\x8b\x9eG\xef\xce\x08\xee\x17\x08\x90g\x918\xab+T\x15\xb10\xef/k\x90\xc7\x15#\x0e*:\xb9C\x94\x03\xb6!\xef\x9f\x87\x8f\xe88\xc5\x85\x00\x95|i#\xd5\xc3\x10\xe1\x04\xb03\x98\'\xb0~\\\x97\xcc\xf1V\x1f\xd6<&Ze\x12\xc5\xc8\x98\xa0x\xa8[s\x1e\\\xf9\xcc\x19E\xbe\\\xe1\xb7La~\xba\x80\xda\x06\x8c%\xca<\x02w\x06#\xc6\x81r\xe4\xb4\xf7<[\x8c\x93\'l\xd1j\x08\x8a\'Bhl\xaf\xfa\xfd\x19\'\xe8\xccF\xe8\x95r\xe0\xaf\x11\xbe\x82f\x05`\xcew\xc9\xe8e4\xe6\x81"\xc2\xd8\x9dT\xd2w\x16$\xb0\x92F\xe7\xd9\x8e\xa8\xad*\x0f<\x91\xfb\x9a\xc0\x08J\x85o\xcb6M\xf45R\'"\xba\xb0\xef\x84\xa5f\xbe\xefe\xe8\xed\x8c\xf8\xe2\xe2\xd2\\\xdd\x9b\xbdJv\xf8/\xaa\x92\x8f\xc6MV:\xad6\x8c\x03\xf2\xf7/7p\xb64J<)B\x0b\x8c\x8e%\xca\xb4I\xdf\x00C\r\t\x01s\xbd\x00\x17\x84\xd8O\x9cV\xdaf@\xe9_od\xfa\x1b8B\x95\xf6-%U1\xc7\xbfi\xf3\xe8\xe3\xe9\xff\x7f\xd5\xceh1\x87L\xd0&\xeb\xe8O\x9b\x1e\x10\xee\x02\xd1\xa9?\x1f\x1c\xf7\xe7T|\\\x98\xc1\xc6Y:\xcf\x14!T\xfc\x96\x911\xdfB\x0f{y\x078j\xd2\xb0\x96\xb6\xc9\x92\xcb\xec6K\x00\x17\x19\x0f\x9c\xd7\x1ag\xc2(\x92\x04\xde$\xa4\xf0\xd0\xb3\xbe\xad\xf4\x06\xd5\x03\x93#\xc3=\x06>>\x8d\xca\x8f\x8bt\xe0\x81X\xc6k\x07|4\xb5\xea\x065\x02\x0b\xe0\xbe\x82\x0c/0\x89\xb2A\xde\xedE\x00\x89\xe7g\xf3\xbf\x80\x89\xaeP\xd0\x10\x9d\x1d\x0e\xca\'\x9f\x81\xfc\xd3\xd4=L\xc0\x8a_\x1b\xbc\x1f\xe4\xb4\xaf\x00\xc2B]@\x8am\xcc\x8a\xf8\x95\xc32!\x04$\x0e\xa5\n\x12\xac6}lq\xcdy\x0bK\x07t;\xa0\'\xaa8 \xe0\xffXz\x8d\x9a\xb7~\xf2]ii\xfd\x1f\x15?\x04\x02\xb2\x85\xdaa\xc6U;\xfa\x83\xe1\xf0\xea\xa7\xfe\x94h\x1e@vftn-\x83\x91\xa6+\xbf\tN\xd74 \x14\xdd\x82\x06o\x19b$ r\xa3\xd14\xb6\xe3Y\xee\xdb\x1d\xb5\xa5\x8d:\xd2\x8b\xb9\xcb\x8e\x81\x03\xd0\xaa\xba\t\x8e\xf1\xc1PZ\xdb\x9b\x04l\xe3\xafX\xae_\x13>\xafu\xecR\xa6\xe9\xcd \xfa\xba\x8e\xe8\x94\xbd&\xe4x&\xfa\x81\xdd\x96\x89\x8c\xf0rsd\xeb\xc0k~:\x16G\xfc]\xc9\x14\xe1BA\x15\xc84`',
                    'filename_rel_path': 'icons/button.png'},
     'cut.png': {'data': b'BZh91AY&SY\x87H\x0f\xb1\x00\x00\xf4\x7f\xff\xff\xf7\xff\xff\xef\xff\xde\x7f\xff\xff\x7f\xff\xff\xfd\xfdo\xff\xff\xff\xffo\xdfo~\xff\xff\xff\xff\xff\xff\xff\xcf\xc0\x02\x1c\xda.\xd9.I\xb4M=\t\xb4\x8c\x06\x84\xc0\x9b@\x02`\x06\x86\x9ahOSh\x13h\x13\xd4h\xda&56@\x04\xc04\x00\x00\x99=\x1a\x06\x81\x0c\x00\x13&\xd102\x004j`\x00\x0c\x9e\x91\'\x91\x92zh\x13=A4\xc8`O!\xa0OSOSA\xb4\x8d\xea\x8cC\x10\xd0\xc2y\'\xa9\xfa\xa0\xc8z\x9e\x90\xfd)\xa7\x92m4O\x08\x9ay= \x81\xa6\'\x92\x19\x0c\xd0\x8d\x0c\x9a4z\x9e\x8dF\x8c\x9e\x9a\x11\xb56\x8c\x80\x9eM\x04\x004\r\x00\x00\xd0\x00\x00\x06\x80i\xa0\x00\x00\x00\x00\x00h\x01\xa1\xa3@\x00\x00\x00\x00\x00\x00\x00\x1a\x00\x1a\x00\x00\x06\x8c\x99\x03#P\x03M\x00\x06\x804\x00\x01\xa6\x80\x00\x00\x00\x00\x00\x06\x80\x01\xa0\x00\x03@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01!_\xa0\xe7\x03\xb2\x062"\x1c\xba\x08\x00A\xec\x02\x11\xe8(@\x028\x85F\xe8_\xfe\x00}\xec\x8c\x1fk\xe6Q#bo\xda\xc4V\xefx\xbcu_x\xe2\xbf\'\xdd\xa2\x06\x1a^\x86a.<1=\xd9H\x13\xf0\xec\x00\x11*\xa6\xbf\x8b\xba\x16\xca)\xa1\xe4\x97\xcbwHx\x08\x82\x82\xce\x8a\x10\xd3B#\x86B\x13\x13\xe9\xafXw\xc4z\x04\xe63\xc6!\xbfnR\xf1\x8a\xad*ed\x0bC\xf8\x12L\rb=;\xbc\xe7&\xdbk\x972A)Z\xe66\x84P\xc5\xd0\xbe7\xd1\xbbtA\xf5\x16\xe12\x00\xe3\xb24\xc6pO\xcc\xc0va\xe3\xa8\xa9\xdf+\x91<\xb8+\xa46#\xa8\xc5\xdf\xb3\x19T\xf6a\tm,-A\xebBL\xddm\xcc7\xbaX\x9b\xcbM\x8e\x80@6\xd9\xca\rI\x9d\xbch!Y\xdd\xcb\x19q\\\xe2Gc\x19c>o\xecx\xdf\xca\xa1N]\xf4hL#\x8a\xc3\xdaE~\xd8\xc9-\xe1\xfa\xae\x85\x8bU@-2\x92\xed\x92\xe1n\x06)\xae\x8d\x14;\x909o\x84e\xb717\x94\x92+\xd9\xc6\xe5E\x8f\xf9\x0e\xb5 \x0c\xb0\x05\x9e\xd2\x01\xe9Jr\x94E\xf9$H\xac\xa9\x8f\xde\x9c(\xd6\x9dp\xf1\xb7y3H\x81GZ\xba\x18\x80j\xe4A\xd2\x0c#T)\xd0j;\xf0\n\x92\xad\x92\xdd\x13\xd1\xce\xd3P\x08[\xa1&\x10<\x89\x98Zh&\x8bN\x03\xb4\x84\xc1\xba>B\nz05\xbc\x90\xf5Qr\xf9\x0c\x95J\xdaf\x8d\xd80rm\xbc\xc1\xee\x0bm\xd8\x00\x89CS\x9e\x8c/X\x07T"\xa2\x97$B\xbb\xda\xe7,\xb1\xa9\x80\xa5\\\x10}h\x08"\xa9\xd6\x89\x1e\x98\x89\xd6\\\xfb\xd7\xbde\xe48\xef\xe7M\x8f\xbe\xe3\xfe\x86\xb7G\xcbB\xb7\xef\x9a\x17P\x87(\xcexa\x80\x91\xdb!O\x16SDp\x10U\xa0\xc0f\xc8\xa2?^\xe1\x86b\x98\xfb\x06\xc5\xc8\x1e\xdd\x83\xbb$\xec\x9b\xd0\x01S\x8f\x81\xc5\xaa\x0e\x14\xd8\xc6Y\xa2\x0bQ\x8eW\xe9\xa6\xfe\x9e\\N\x9aMk\xf9Y\x85#\x0eOc\x90\x8c,j\xf0\xf5\xf76\x11\xd5\x85\x03\xbe\xedf\xbb\'\x98J\xe0\xa2e-\x0c\x13u\xdc\xce\x15#\x07|7\xbc3\x17.\xf0\x90\xa4\x8b\x87z\x10q\xb6\xd7\x82\x97"|\xc0"Q\xc7&\x86\xb9\xac\x86g\t}\xdaq2\xac(\xc6B\xd2\xd9\xde\xb9\xc1\x9e3K\xdc5\xd8g\xbb\xff\x13`M\xd9\xa6xR\x9c\xaej_\xcbT\xed\x17\xf5j*(\x19\xdf\xd7\x86\xe4\'\xbf\xfe\xa1\x16q\x07\x9f\x9d\x93\xc5\x96\xcb\xa4Q\x80\x8e2Z\xc6\xb3\xe0\x9e3YV\x1a\xb8I\x04\x05!Bt\x81[\xd3\xc8\xf4Z\xb2\xe0\x97"\xd8Bc\xcc@[\x10\x8f\xdd\xec\xac&\xc7\xa4\x1b\xc9\xcd,\xb2\x9f\xf0\x85j@hp4xO+(\xd5(\xa41\x03\xb2\xcb\xf5\x14\xbc\x00&1t\xd3\xba*\xb2\xe2\'Z\x13\x1f\xf0\xc6\x98\x02\x98\xc0;\x89\x0c8\x94p\xea\x07\xc4\x1c1ZD\x92\xbf\xd1\x86\x9b\x0e\xe0L|\n\x01`/\xf8\xbb\x92)\xc2\x84\x84:@}\x88', 'filename_rel_path': 'icons/cut.png'}}
    

# get icon
def icon(name, dataset=icons):
    "Returns unpacked data from the dataset (default is icons-icons['name'])."

    return BytesIO(bz2.decompress(dataset[name]['data']))


if __name__ == '__main__':
    # tests
    #print(bz2.compress(open('icons/button.png', 'r+b').read()))
    #print(load_icons('icons/', ('button.png', 'cut.png')))
    #print(icon('cut.png'))
    #print(icons['cut.png']['filename_rel_path'])
    pass
